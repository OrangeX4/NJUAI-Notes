# 数电作业

## 1.

对这段代码分析:

``` c
int i = 65535;
short si = (short)i;
int j = si;
```

变量 `i` 的值为 `65535`, 因为 `int` 类型长度为**四个字节**, 此时 `i` 对应的机器码为 `0000ffff`, 很明显不可能为负数, 那就仍然为原值 `65535`.

变量 `si` 的值为 `-1`, 因为 `short` 类型长度为**两个字节**, 并且是**有符号的**, 此时 `si` 对应的机器码应为 `i` 所截出来的后两个字节, 即 `ffff`, 为负数, 根据补码的知识可知为 `-1`.

变量 `j` 的值也为 `-1`, 因为在 C 语言的类型转化中, 有符号短整数类型强制转化为有符号长整数类型时, **会维持符号不变**, 那么对应值也不变, 仍为 `-1`. 并且此时的 `j` 对应的机器码已经和 `i`, `si` 都不同了, 其机器码为 `ffffffff`.

## 2.

对这段代码分析:

``` c
int func1(unsigned word) {
    return (int)((word << 24) >> 24);
}

int func2(unsigned word) {
    return ((int)word << 24) >> 24;
}
```

逻辑移位和算术移位的特点为:

**逻辑左移和逻辑右移**都是空缺处补 `0`. **算术左移**同逻辑左移. **算术右移**移入的位用符号位填, 即负数最高位填 `1`, 正数最高位填 `0`.

| >        | w   | >        | func1(w) | >        | func2(w) |
| -------- | --- | -------- | -------- | -------- | -------- |
| 机器数   | 值   | 机器数   | 值       | 机器数   | 值        |
| 0000007F | 127 | 0000007F | 127      | 0000007F | 127      |
| 00000080 | 128 | 00000080 | 128      | FFFFFF80 | -128     |
| 000000FF | 255 | 000000FF | 255      | FFFFFFFF | -1       |
| 00000100 | 256 | 00000000 | 0        | 00000000 | 0        |

`func1` 的功能是取 32 位整数的低 8 位所对应的**原码值**.

`func2` 的功能是取 32 位整数的低 8 位所对应的**补码值**.

## 3.

|模式|>|x|>|y|>|x×y (截断前)|>|x×y (截断后)|
|---|---|---|---|---|---|---|---|---|---|
|       |机器数|值|机器数|值|机器数|值|机器数|值|
|无符号数  |110| 6 |010| 2 |001100| 12|100| 4 |
|二进制补码|110| -2|010| 2 |111100| -4|100| 4 |
|无符号数  |001| 1 |111| 7 |000111| 7 |111| 7 |
|二进制补码|001| 1 |111| -1|111111| -1|111| 7 |
|无符号数  |111| 7 |111| 7 |110001| 49|001| 1 |
|二进制补码|111| -1|111| -1|000001| 1 |001| 1 |

## 4.

``` c
int t = x;
x <<= 4;
x -= t;
```

这一步操作相当于 `(2^4-1)x` 即 `15x`, 可知

M = 15.

对于 y 是正数的情况,

```
y >>= 2;
```

相当于 `y / 4`, 可知

N = 4

## 5. 

对于串行进位:

$C_1=A_1C_0+B_1C_0+A_1B_1$

$C_2=A_2C_1+B_2C_1+A_2B_2=A_{2} B_{2} + A_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right) + B_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right)$

$C_3=A_3C_2+B_3C_2+A_3B_3=A_{3} B_{3} + A_{3} \left(A_{2} B_{2} + A_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right) + B_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right)\right) + B_{3} \left(A_{2} B_{2} + A_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right) + B_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right)\right)$

$C_4=A_4C_3+B_4C_3+A_4B_4=A_{4} B_{4} + A_{4} \left(A_{3} B_{3} + A_{3} \left(A_{2} B_{2} + A_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right) + B_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right)\right) + B_{3} \left(A_{2} B_{2} + A_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right) + B_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right)\right)\right) + B_{4} \left(A_{3} B_{3} + A_{3} \left(A_{2} B_{2} + A_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right) + B_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right)\right) + B_{3} \left(A_{2} B_{2} + A_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right) + B_{2} \left(A_{1} B_{1} + A_{1} C_{0} + B_{1} C_{0}\right)\right)\right)$

对于先行进位:

定义辅助函数 $G_{i}=A_{i}B_{i}\cdots, P_{i}=A_{i}+B_{i}\cdots$

则 $C_{i+1}=G_{i}+P_{i}C_{i}$

$C_1=G_0+P_0C_0$

$C_2=G_1+P_1C_1=G_1+P_1G_0+P_1P_0C_0$

$C_3=G_2+P_2C_2=G_2+P_2G_1+P_2P_1G_0+P_2P_1P_0C_0$

$C_4=G_3+P_3C_3=G_3+P_3G_2+P_3P_2G_1+P_3P_2P_1G_0+P_3P_2P_1P_0C_0$


## 6.

### (1)

由题目有 $[x]_{\text{补}}=0101, [y]_{\text{补}}=1101$

所以 $[x+y]_{\text{补}}=[x]_{\text{补}}+[y]_{\text{补}}=0101+1101 \ (\text{mod}\ 2^{4})=0010$

其真值为 $2$.

并且 $[x-y]_{\text{补}}=[x]_{\text{补}}+\overline{[y]}_{\text{补}}+1=0101+0010+1 \ (\text{mod}\ 2^{4})=1000$

其真值为 $8$.

### (2)

由题目有 $[x]_{\text{原}}=0101, [y]_{\text{原}}=1101$

符号位 $0\oplus 1=1$

```
    C   乘积 P  乘数 R
----------------------
    0   000     101
    +   101
----------------------
    0   101     101
→   0   010     110
→   0   001     011
    +   101
----------------------
    0   110     011
→   0   011     001
```

即 $[x\times y]_{\text{原}}=1 011 001$

经检验 $5\times (-5)=-(1+2^{3}+2^{4})=-25$ 成立, 结果正确

### (3)

由题目有 $[x]_{\text{补}}=0101, [y]_{\text{补}}=1101, [x]_{\text{补}}=1011$

```
    P       Y       y'
----------------------
    0000    1101    0
+   1011
----------------------
    1011    1101    0
→   1101    1110    1
+   0101
----------------------
    0010    1110    1
→   0001    0111    0
+   1011
----------------------
    1100    0111    0
→   1110    0011    1
→   1111    0001    1
```

结果为 $[x\times y]_{\text{补}}=1111 0001$

经检验 $5\times (-3)=1+2^{6}=-15$ 成立, 结果正确

### (4)

由题目有 $[x]_{\text{原}}=0101, [y]_{\text{原}}=1101, [|x|]_{\text{原}}=0101, [|y|]_{\text{原}}=0101, [-|y|]_{\text{原}}=1011$

```
    R       Q
    0000    101
+   1011
-----------------
    1011    1010
←   0111    010
+   0101
-----------------
    1100    0100
←   1000    100
+   0101
-----------------
    1101    1000
←   1011    000
+   0101
-----------------
    0000    0001
```

所以 $[x/y]_{\text{原}}=1001$, 余数为 $0000$

经验算, $(-5)\times (-1)+0=5$ 成立.


### (5)

由题目有 $[x]_{\text{补}}=0101, [y]_{\text{补}}=1101, [|x|]_{\text{补}}=0000 0101, [-y]_{\text{补}}=0011$

```
    R       Q
    0000    0101
+   1101
-----------------
    1101    0101
←   1010    1011
+   0011
-----------------
    1101    1011
←   1011    0111
+   0011
-----------------
    1110    0111
←   1100    1111
+   0011
-----------------
    1111    1111
←   1111    1111
+   0011
-----------------
    0010    1111
←   0101    1110
+   1101       1
-----------------
    0010    1111
```

所以 $[x/y]_{\text{补}}=1111$, 余数为 $0010$

验证可得 $(-3)\times (-1)+2=5$ 成立.


